using System.Security.Cryptography;
using System;
using Model;

namespace Infrastructure
{

    public class ContactCreator
    {
        private string[] firstNames;
        private string[] lastNames;

        public ContactCreator(
            string[] firstNames, 
            string[] lastNames)
        {
            this.firstNames = File.ReadAllLines(pathToFirstNamesFile);
            this.lastNames = File.ReadAllLines(pathToLastNamesFile);
        }

        public Contact GetContact()
        {
            int lenghtFn = firstNames.length;
            int lenghtLn = lastNames.length;
            string firstName = this.firstNames[Random.Shares.Next(lenghtFn)];
            string lastName = this.lastNames[Random.Shares.Next(lenghtLn)];

            Contact contact = new Contact();
            contact.FirstName = firstName;
            contact.LastName = lastName;

            string pattern = "+7 ({0}) {1}-{2}-{3}";
            contact.TelephoneNumber = string.Format(
                pattern,
                Random.Shared.Next(900, 1000),
                Random.Shared.Next(100, 1000),
                Random.Shared.Next(10, 100),
                Random.Shared.Next(10, 100)
            );

            return contact;
        }

    }
}